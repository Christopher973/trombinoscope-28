
// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Member {
  id                      Int       @id @default(autoincrement())
  firstname               String
  lastname                String
  gender                  String?
  startDate               DateTime
  birthday                DateTime
  jobDescription          String
  managementCategory      String
  serviceAssignmentCode   String
  professionnalEmail      String
  imageUrl                String?
  
  departmentId            Int?
  department              Department? @relation(fields: [departmentId], references: [id])
  
  locationId              Int?
  location                Location? @relation(fields: [locationId], references: [id])
  
  managerId               Int?
  manager                 Member?   @relation("MemberToManager", fields: [managerId], references: [id])

  directReports           Member[]  @relation("MemberToManager")

  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt
}

model Department {
  id              Int       @id @default(autoincrement())
  name            String    @unique
  
  members         Member[]
  
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Location {
  id              Int       @id @default(autoincrement())
  name            String    @unique
  
  members         Member[]
}
